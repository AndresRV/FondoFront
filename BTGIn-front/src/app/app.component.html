<main>
  <header class="header-app">
    <div class="seccion-tittle">Gestión de fondos</div>
  </header>
  <section class="content">
    <!--componente client-->
    <div class="flex flex-column md:flex-row column-gap-4 lg:column-gap-8 p-fluid pt-5 md:px-5">
      <div class="mb-5">
          <p-floatLabel >
              <input
                  type="text" 
                  pInputText
                  id="inputClientName"
                  [disabled]="true" 
                  [(ngModel)]="clientPortfolio.client.name"/>
              <label for="inputClientName">Nombre</label>
          </p-floatLabel>
      </div>

      <div class="mb-5">
          <p-floatLabel>
              <p-inputNumber 
                  id="inputClientIdentification"
                  [disabled]="true" 
                  [(ngModel)]="clientPortfolio.client.identification"/>
              <label for="inputClientIdentification">Identificación</label>
          </p-floatLabel>
      </div>

      <div class="mb-5">
        <p-floatLabel>
            <p-inputNumber 
                id="inputClientCash"
                [disabled]="true" 
                [(ngModel)]="clientPortfolio.client.cash"/>
            <label for="inputClientCash">Capital disponible</label>
        </p-floatLabel>
      </div>        

      <div class="mb-5">
        <p-floatLabel>
            <p-inputNumber 
                id="inputCountRegisteredFunds"
                [disabled]="true" 
                [(ngModel)]="clientPortfolio.client.countRegisteredFunds"/>
            <label for="inputCountRegisteredFunds">Fondos registrados</label>
        </p-floatLabel>
      </div>
    </div>

    <div class="grid">      
      <div class="col-12 md:col-4">
        <div class="box">Column 1</div>

        <div class="card">
          <p-dataView #dv [value]="clientPortfolio.fundsAvailable">
            <ng-template pTemplate="list" >
              <div class="grid grid-nogutter">

                <div class="col-12" *ngFor="let fund of clientPortfolio.fundsAvailable; let first = first">
                  <div class="flex flex-column sm:flex-row sm:align-items-center p-2 gap-3" [ngClass]="{ 'border-top-1 surface-border': !first }">
                    <div class="flex flex-row justify-content-between md:align-items-center flex-1 ">
                        <div class="flex flex-row md:flex-column justify-content-between align-items-start gap-2">
                          <div>
                            <span class="font-medium text-secondary text-sm">{{ fund.category }}</span>
                            <div class="text-xl font-semibold text-900">{{ fund.name }}</div>
                            <span>{{ 'Monto mínimo: $' + fund.minimumRegistrationAmount }}</span>
                          </div>
                        </div>
                        <p-button class="white-space-nowrap" label="Buy Now" size="small" />
                    </div>
                  </div>
                </div>

              </div>
            </ng-template>
          </p-dataView>
        </div>
    
      </div>
      <div class="col-12 md:col-4">
        <div class="box">Column 2</div>

        <div class="card">
          <p-dataView #dv2 [value]="clientPortfolio.registeredFunds">
            <ng-template pTemplate="list" >
              <div class="grid grid-nogutter">

                <div class="col-12" *ngFor="let fund of clientPortfolio.registeredFunds; let first = first">
                  <div class="flex flex-column sm:flex-row sm:align-items-center p-2 gap-3" [ngClass]="{ 'border-top-1 surface-border': !first }">
                    <div class="flex flex-row justify-content-between md:align-items-center flex-1 ">
                        <div class="flex flex-row md:flex-column justify-content-between align-items-start gap-2">
                          <div>
                            <span class="font-medium text-secondary text-sm">{{ fund.category }}</span>
                            <div class="text-xl font-semibold text-900">{{ fund.name }}</div>
                            <span>{{ 'Monto mínimo: $' + fund.minimumRegistrationAmount }}</span>
                            <div>{{ 'Monto inscrito: $' + fund.registredAmount }}</div>
                          </div>
                        </div>
                        <p-button class="white-space-nowrap" label="Buy Now" size="small" />
                    </div>
                  </div>
                </div>

              </div>
            </ng-template>
          </p-dataView>
        </div>     
       
      </div>
      <div class="col-12 md:col-4">
        <div class="box">Column 3</div>

        <!--[tableStyle]="{ 'min-width': '50rem' }"-->
        <div class="card">
          <p-table [value]="clientPortfolio.transactionHistory" >
            <ng-template pTemplate="header">
              <tr>
                <th>Tipo</th>
                <th>Cantidad</th>
                <th>Fecha</th>
                <th>Aceptada</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-transaction>
              <tr>
                <td>{{ transaction.type }}</td>
                <td>{{ transaction.amount }}</td>
                <td>{{ transaction.date | date:'short' }}</td>
                <td>{{ transaction.isAcepted ? 'Si' : 'No' }}</td>
              </tr>
            </ng-template>
          </p-table>
        </div>      

      </div>
    </div> 
    <app-spinner-modal></app-spinner-modal>
  </section>
</main>